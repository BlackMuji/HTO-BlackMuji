{"version":3,"file":"MachineRegisterPage-udn9udjZ.js","sources":["../../node_modules/@mui/icons-material/esm/ArrowLeftOutlined.js","../../src/components/machine/AddMachineForm.tsx","../../src/pages/machine/MachineRegisterPage.tsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"m14 7-5 5 5 5z\"\n}), 'ArrowLeftOutlined');","import React, { useEffect, useRef, useState } from 'react';\r\nimport { createMachine } from '../../api/axiosMachine';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../../assets/scss/machine/AddMachineForm.scss';\r\nimport ArrowLeftOutlinedIcon from '@mui/icons-material/ArrowLeftOutlined';\r\n\r\ninterface MachineFormData {\r\n  name: string;\r\n  category: string;\r\n  amiId: string;\r\n  flag: string;\r\n  description?: string;\r\n  exp?: number;\r\n  hints: string[];\r\n  hintCosts: number[];\r\n}\r\n\r\nconst AddMachineForm: React.FC = () => {\r\n  const descriptionRef = useRef<HTMLTextAreaElement>(null);\r\n  const [formData, setFormData] = useState<MachineFormData>({\r\n    name: '',\r\n    category: '',\r\n    amiId: '',\r\n    flag: '',\r\n    description: '',\r\n    exp: 50,\r\n    hints: [''],\r\n    hintCosts: [1],\r\n  });\r\n  const [error, setError] = useState<string | null>(null);\r\n  const navigate = useNavigate();\r\n\r\n  const handleChange = (\r\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\r\n  ) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prevData) => ({\r\n      ...prevData,\r\n      [name]: name === 'exp' || name === 'contestExp' ? Number(value) : value,\r\n    }));\r\n  };\r\n\r\n  const handleHintChange = (index: number, value: string) => {\r\n    const newHints = [...formData.hints];\r\n    newHints[index] = value;\r\n    setFormData((prevData) => ({\r\n      ...prevData,\r\n      hints: newHints,\r\n    }));\r\n  };\r\n\r\n  const handleHintCostChange = (index: number, value: number) => {\r\n    const newHintCosts = [...formData.hintCosts];\r\n    newHintCosts[index] = value;\r\n    setFormData((prevData) => ({\r\n      ...prevData,\r\n      hintCosts: newHintCosts,\r\n    }));\r\n  };\r\n\r\n  const addHint = () => {\r\n    setFormData((prevData) => ({\r\n      ...prevData,\r\n      hints: [...prevData.hints, ''],\r\n      hintCosts: [...prevData.hintCosts, 1],\r\n    }));\r\n  };\r\n\r\n  const removeHint = (index: number) => {\r\n    const newHints = [...formData.hints];\r\n    const newHintCosts = [...formData.hintCosts];\r\n    newHints.splice(index, 1);\r\n    newHintCosts.splice(index, 1);\r\n    setFormData((prevData) => ({\r\n      ...prevData,\r\n      hints: newHints,\r\n      hintCosts: newHintCosts,\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n\r\n    // Basic Frontend Validation\r\n    if (\r\n      !formData.name ||\r\n      !formData.category ||\r\n      !formData.amiId ||\r\n      !formData.flag\r\n    ) {\r\n      setError('Please fill in all required fields.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await createMachine(formData);\r\n      navigate('/machines'); // Redirect to machine list or detail page\r\n    } catch (err: any) {\r\n      setError(err.msg || 'Failed to create machine.');\r\n    }\r\n  };\r\n\r\n  const adjustTextareaHeight = () => {\r\n    if (descriptionRef.current) {\r\n      descriptionRef.current.style.height = 'auto';\r\n      descriptionRef.current.style.width = '50%';\r\n      descriptionRef.current.style.height = `${descriptionRef.current.scrollHeight}px`;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    adjustTextareaHeight();\r\n  }, [formData.description]);\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className='add-machine-form'>\r\n      <div className='back-button'>\r\n        <button className=\"IconButton\" type='button' onClick={() => navigate(-1)}><ArrowLeftOutlinedIcon style={{ color: 'white', fontSize: \"34px\" }} /></button>\r\n      </div>\r\n      <h2>Add New Machine</h2>\r\n\r\n      {error && <p className='error-message'>{error}</p>}\r\n      <div className='create-container'>\r\n\r\n\r\n        <div className='name-container'>\r\n          <label htmlFor='name'>Machine name <span style={{ color: 'red' }}>*</span></label>\r\n          <input\r\n            type='text'\r\n            id='name'\r\n            name='name'\r\n            value={formData.name}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className='category-container'>\r\n          <label htmlFor='category'>Category <span style={{ color: 'red' }}>*</span></label>\r\n          <select\r\n            id=\"category\"\r\n            name=\"category\"\r\n            value={formData.category}\r\n            onChange={(e: React.ChangeEvent<HTMLSelectElement>) => handleChange(e as unknown as React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>)}\r\n            required\r\n          >\r\n            <option value=\"\">--Select Category--</option>\r\n            <option value=\"Web\">Web</option>\r\n            <option value=\"Network\">Network</option>\r\n            <option value=\"Database\">Database</option>\r\n            <option value=\"Crypto\">Crypto</option>\r\n            <option value=\"Cloud\">Cloud</option>\r\n            <option value=\"AI\">AI</option>\r\n            <option value=\"OS\">OS</option>\r\n            <option value=\"Other\">Other</option>\r\n          </select>\r\n        </div>\r\n\r\n\r\n        <div className='amiId-container'>\r\n          <label htmlFor='amiId'>AMI ID <span style={{ color: 'red' }}>*</span></label>\r\n          <input\r\n            type='text'\r\n            id='amiId'\r\n            name='amiId'\r\n            value={formData.amiId}\r\n            onChange={handleChange}\r\n            placeholder='AMI-XXXXXX'\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className='flag-container'>\r\n          <label htmlFor='flag'>Flag <span style={{ color: 'red' }}>*</span></label>\r\n          <input\r\n            type='text'\r\n            id='flag'\r\n            name='flag'\r\n            value={formData.flag}\r\n            onChange={handleChange}\r\n            required\r\n            placeholder='Flag of the machine here'\r\n          />\r\n        </div>\r\n\r\n        <div className='Description-container'>\r\n          <label htmlFor='description'>Machine Description <span style={{ color: 'red' }}>*</span></label>\r\n          <textarea\r\n            ref={descriptionRef}\r\n            id='description'\r\n            name='description'\r\n            value={formData.description}\r\n            placeholder='Description of the machine here'\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n\r\n        <div className='exp-container'>\r\n          <label htmlFor='exp'>EXP <span style={{ color: 'red' }}>*</span></label>\r\n          <input\r\n            type='number'\r\n            id='exp'\r\n            name='exp'\r\n            value={formData.exp}\r\n            onChange={handleChange}\r\n            min={0}\r\n          />\r\n        </div>\r\n\r\n        <div className='hint-container'>\r\n          <label>Hints <span style={{ color: 'red' }}>*</span></label>\r\n          {formData.hints.map((hint, index) => (\r\n            <div className='key-container' key={index}>\r\n              <input\r\n                className=''\r\n                type='text'\r\n                value={hint}\r\n                onChange={(e) => handleHintChange(index, e.target.value)}\r\n                placeholder='Hint'\r\n              />\r\n              <input\r\n                type='number'\r\n                value={formData.hintCosts[index]}\r\n                onChange={(e) =>\r\n                  handleHintCostChange(index, Number(e.target.value))\r\n                }\r\n                placeholder='Cost'\r\n                min={0}\r\n              />\r\n              {formData.hints.length > 1 && (\r\n                <button className='remove-hint' type='button' onClick={() => removeHint(index)}>\r\n                  Remove\r\n                </button>\r\n              )}\r\n              <button className='add-hint' type='button' onClick={addHint}>\r\n                Add Hint\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n\r\n        <div className='add-machine-form-button'>\r\n          <button type='submit'>Create Machine</button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default AddMachineForm;\r\n","import React from 'react';\r\nimport Main from '../../components/main/Main';\r\nimport AddMachineForm from '../../components/machine/AddMachineForm';\r\n\r\nconst MachineRegisterPage: React.FC = () => {\r\n    return (\r\n        <Main>\r\n            <AddMachineForm />\r\n        </Main>\r\n    );\r\n};\r\n\r\nexport default MachineRegisterPage;\r\n"],"names":["ArrowLeftOutlinedIcon","createSvgIcon","_jsx","AddMachineForm","descriptionRef","useRef","formData","setFormData","useState","error","setError","navigate","useNavigate","handleChange","e","name","value","prevData","handleHintChange","index","newHints","handleHintCostChange","newHintCosts","addHint","removeHint","handleSubmit","createMachine","err","adjustTextareaHeight","useEffect","jsxs","jsx","hint","MachineRegisterPage","Main"],"mappings":"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","x_google_ignoreList":[0]}