import{r as a,j as e}from"./index-CivGSquN.js";import{D as j,A as u,C as f}from"./ConfirmationModal-KRM3RTXK.js";import{S as p,E as I}from"./AdminSidebar-DtRlde2w.js";import{b as y,c as T}from"./axiosInstance-ByXgwNmE.js";const O=()=>{const[r,c]=a.useState([]),[i,o]=a.useState(null),[d,t]=a.useState({isOpen:!1,instanceId:void 0});a.useEffect(()=>{(async()=>{try{const n=await y();c(n.instances)}catch(n){console.error("Error fetching instances:",n),o("Failed to load instances.")}})()},[]);const m=s=>{t({isOpen:!0,instanceId:s})},h=async()=>{const{instanceId:s}=d;if(s)try{await T(s),c(n=>n.filter(x=>x._id!==s)),t({isOpen:!1,instanceId:void 0})}catch(n){console.error("Error terminating instance:",n),o("Failed to terminate instance."),t({isOpen:!1,instanceId:void 0})}},l=[{header:"User",accessor:"user"},{header:"Machine Type",accessor:"machineType"},{header:"Status",accessor:"status"}];return e.jsxs("div",{className:"admin-dashboard",children:[e.jsx(p,{}),e.jsxs("div",{className:"admin-content",children:[e.jsx("h1",{children:"Instances Management"}),i&&e.jsx(I,{message:i}),e.jsx(j,{columns:l,data:r,actions:void 0}),e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[l.map(s=>e.jsx("th",{children:s.header},s.accessor)),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:r.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.user}),e.jsx("td",{children:s.machineType}),e.jsx("td",{children:s.status}),e.jsx("td",{children:e.jsx(u,{onDelete:()=>m(s._id)})})]},s._id))})]}),e.jsx(f,{isOpen:d.isOpen,title:"Confirm Terminate Instance",message:"Are you sure you want to terminate this instance? This action cannot be undone.",onConfirm:h,onCancel:()=>t({isOpen:!1,instanceId:void 0})})]})]})};export{O as default};
//# sourceMappingURL=InstancesManagement-Cp3MRYqV.js.map
