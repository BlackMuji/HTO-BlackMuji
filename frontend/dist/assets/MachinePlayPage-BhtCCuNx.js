import{f as S,r as a,j as e,M as l}from"./index-CivGSquN.js";import{d as M}from"./axiosMachine-BVJLXleH.js";import{g as N}from"./axiosInstance-ByXgwNmE.js";import{D as v,a as P,S as D,I as E,G as w,b as R,c as b}from"./GiveUpButton-D21FeauA.js";import"./axiosContest-a7qLFL0E.js";const T=()=>{const{machineId:n}=S(),[s,g]=a.useState(null),[h,d]=a.useState(null),[I,i]=a.useState(null),[f,o]=a.useState(!1),[j,m]=a.useState(!0);a.useEffect(()=>{(async()=>{if(!n){d("Machine ID is missing."),m(!1);return}try{const t=await M(n);console.log("Machine Details:",t.machine),g(t.machine);const c=await N(n);if(console.log("Instance Response:",c),c.instances&&c.instances.length>0){o(!0);const x=c.instances[0];i(x.status),console.log("Existing Instance Found:",x)}else o(!1),i(null),console.log("No Existing Instance Found")}catch(t){console.error("Error fetching machine details or instances:",t),d("Failed to fetch machine details or instances.")}finally{m(!1)}})()},[n]);const p=r=>{console.log("Instance status changed to:",r),i(r)},y=()=>{console.log("Instance has been started."),o(!0)};if(h)return e.jsx(l,{children:e.jsxs("div",{className:"machine-play-container",children:[e.jsx("h2",{children:"Machine Play"}),e.jsx("div",{className:"error-message",children:h})]})});if(!s||j)return e.jsx(l,{children:e.jsxs("div",{className:"machine-play-container",children:[e.jsx("h2",{children:"Machine Play"}),e.jsx("div",{children:"Loading machine details..."})]})});const u=I==="running";return e.jsx(l,{children:e.jsxs("div",{className:"machine-play-container",children:[e.jsx("div",{className:"machine-play-title",children:e.jsx("h2",{children:"Machine Play"})}),e.jsx("div",{className:"machine-play-name",children:e.jsxs("h3",{children:["Now Playing: ",s.name]})}),e.jsx(v,{reward:s.exp}),e.jsx(P,{}),f?e.jsx(E,{machineId:n||"",onStatusChange:p}):e.jsx(D,{machineId:n||"",onInstanceStarted:y}),e.jsx(w,{machineId:n||"",playType:"machine",disabled:!u}),e.jsx(R,{machineId:n||"",playType:"machine",disabled:!u}),e.jsx(b,{machineId:n||"",machineName:s.name,mode:"machine"})]})})};export{T as default};
//# sourceMappingURL=MachinePlayPage-BhtCCuNx.js.map
