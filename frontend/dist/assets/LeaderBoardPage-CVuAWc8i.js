import{r as t,j as n,g,F as p,A as h,a as f,M as x,b as v,c as M}from"./index-CivGSquN.js";import{C as j,I as y,a as I}from"./CurrentUserInfo-BfC7ddW6.js";const C="_skip_1inkp_1",N="_blind_1inkp_192",A="_ir_1inkp_204",L="_background_1inkp_253",E="_main_container_1inkp_262",P="_sidebar_container_1inkp_271",R="_collpased_1inkp_277",B="_upper_container_1inkp_280",w="_upper_bar_1inkp_285",D="_profile_container_1inkp_291",F="_props_container_1inkp_294",U="_collapsed_1inkp_309",z="_sidebarMenu_1inkp_313",S="_headerParent_1inkp_326",$="_header_1inkp_326",T="_logoimage_1inkp_344",G="_logoContainerIcon_1inkp_348",V="_sidebarMenuButton_1inkp_354",q="_collapse_button_1inkp_364",H="_topMenu_1inkp_372",J="_verticalMenuList_1inkp_381",K="_verticalMenuItem_1inkp_387",O="_menuIcon_1inkp_399",Q="_label_1inkp_404",W="_selected_1inkp_430",X="_userinfoDark_1inkp_445",Y="_userinfoDark_container_1inkp_459",Z="_userinfo_1inkp_445",ee="_rectangleParent_1inkp_480",ne="_userIcon_1inkp_487",ae="_userinfoContainer_1inkp_494",re="_userName_1inkp_501",oe="_userEmail_1inkp_505",se="_userinfoButtonIcon_1inkp_510",te="_userinfoDarkChild_1inkp_519",_e="_userMenu_1inkp_525",ie="_expanded_1inkp_540",ce="_settings_1inkp_544",de="_settingsInner_1inkp_553",le="_settingsChild_1inkp_554",ue="_icon_1inkp_571",pe="_dashboard_1inkp_577",ke="_darkMode_1inkp_589",be="_switchIcon_1inkp_597",me="_logout_1inkp_606",ge="_logout_icon_1inkp_621",he="_board_1inkp_625",fe="_leaderboard_container_1inkp_630",xe="_current_user_1inkp_642",ve="_user_box_1inkp_646",Me="_leaderboard_table_1inkp_652",je="_leaderboard_data_1inkp_663",ye="_leaderboard_rank_1inkp_668",Ie="_leaderboard_level_1inkp_669",Ce="_leaderboard_exp_1inkp_670",Ne="_leaderboard_userinfo_1inkp_681",Ae="_leaderboard_avatar_1inkp_687",Le="_leaderboard_username_1inkp_692",Ee="_pagination_1inkp_700",Pe="_page_button_1inkp_705",Re="_number_button_1inkp_716",Be="_goldMedal_1inkp_723",we="_silverMedal_1inkp_724",De="_bronzeMedal_1inkp_725",Fe="_high_rank_1inkp_743",a={skip:C,blind:N,ir:A,background:L,main_container:E,sidebar_container:P,collpased:R,upper_container:B,upper_bar:w,profile_container:D,props_container:F,collapsed:U,sidebarMenu:z,headerParent:S,header:$,logoimage:T,logoContainerIcon:G,sidebarMenuButton:V,collapse_button:q,topMenu:H,verticalMenuList:J,verticalMenuItem:K,menuIcon:O,label:Q,selected:W,userinfoDark:X,userinfoDark_container:Y,userinfo:Z,rectangleParent:ee,userIcon:ne,userinfoContainer:ae,userName:re,userEmail:oe,userinfoButtonIcon:se,userinfoDarkChild:te,userMenu:_e,expanded:ie,settings:ce,settingsInner:de,settingsChild:le,icon:ue,dashboard:pe,darkMode:ke,switchIcon:be,logout:me,logout_icon:ge,board:he,leaderboard_container:fe,current_user:xe,user_box:ve,leaderboard_table:Me,leaderboard_data:je,leaderboard_rank:ye,leaderboard_level:Ie,leaderboard_exp:Ce,leaderboard_userinfo:Ne,leaderboard_avatar:Ae,leaderboard_username:Le,pagination:Ee,page_button:Pe,number_button:Re,goldMedal:Be,silverMedal:we,bronzeMedal:De,high_rank:Fe},k=8,Ue=({leaderboard:l,currentUser:_})=>{const[o,c]=t.useState(1),i=Math.ceil(l.length/k),s=(o-1)*k,u=l.slice(s,s+k),d=r=>{r>0&&r<=i&&c(r)};return n.jsx("div",{className:a.board,children:n.jsxs("div",{className:a.leaderboard_container,children:[n.jsx(j,{currentUser:_}),n.jsx("div",{className:a.leaderboard_table,children:u.length>0?u.map((r,e)=>{const b=g(r.username),m=f[b];return n.jsxs("div",{className:a.leaderboard_data,children:[n.jsx("div",{className:a.leaderboard_rank,children:e===0?n.jsxs(n.Fragment,{children:[n.jsx(p,{className:a.goldMedal,size:32}),n.jsx("span",{className:a.high_rank,children:s+e+1})]}):e===1?n.jsxs(n.Fragment,{children:[n.jsx(p,{className:a.silverMedal,size:32}),n.jsx("span",{className:a.high_rank,children:s+e+1})]}):e===2?n.jsxs(n.Fragment,{children:[n.jsx(p,{className:a.bronzeMedal,size:32}),n.jsx("span",{className:a.high_rank,children:s+e+1})]}):`${s+e+1}`}),n.jsxs("div",{className:a.leaderboard_level,children:["LV. ",r.level]}),n.jsxs("div",{className:a.leaderboard_userinfo,children:[n.jsx(h,{alt:r.username,sx:{width:50,height:50,backgroundColor:m},children:r.username.charAt(0).toUpperCase()}),n.jsx("div",{className:a.leaderboard_username,children:r.username})]}),n.jsx("div",{className:a.leaderboard_exp,children:r.exp})]},`${r._id}-${e}`)}):n.jsx("div",{children:n.jsx("div",{className:"no-data",children:"No users found"})},"no-users-found")}),n.jsxs("div",{className:a.pagination,children:[n.jsx("button",{className:a.page_button,onClick:()=>d(o-1),disabled:o===1,children:n.jsx(y,{})}),Array.from({length:i},(r,e)=>n.jsx("button",{className:`${a.number_button} ${o===e+1?a.active:""}`,onClick:()=>d(e+1),children:e+1},e)),n.jsx("button",{className:a.page_button,onClick:()=>d(o+1),disabled:o===i,children:n.jsx(I,{})})]})]})})},$e=()=>{const[l,_]=t.useState([]),[o,c]=t.useState(null),[i,s]=t.useState(!1),[u,d]=t.useState({_id:"",myRank:null,myLevel:null,myExp:null,myUsername:null,myAvatar:null});return t.useEffect(()=>{(async()=>{s(!0);try{const e=await v();console.log("Leaderboard API Response:",e),e&&Array.isArray(e.users)?_(e.users):e&&Array.isArray(e.data)?_(e.data):Array.isArray(e)?_(e):(console.error("Unexpected leaderboard data structure:",e),_([]))}catch(e){console.error("Error fetching leaderboard:",e.message||e),c("Failed to fetch leaderboard data.")}finally{s(!1)}})()},[]),t.useEffect(()=>{(async()=>{try{const e=await M();console.log("My Rank API Response:",e),e&&e.myRank!==void 0&&e.user?d({_id:e.user._id,myRank:e.myRank,myLevel:e.user.level,myExp:e.user.exp,myUsername:e.user.username,myAvatar:e.user.avatar}):(console.error("Unexpected myRank data structure:",e),c("Failed to fetch my rank data."))}catch(e){console.error("Error fetching my rank:",e.message||e),c("Failed to fetch my rank data.")}})()},[]),n.jsx(x,{title:"LeaderBoard",description:"LeaderBoard 화면입니다.",children:n.jsxs("div",{className:"leaderboard-page",children:[i&&n.jsx("p",{children:"Loading leaderboard..."}),o&&n.jsx("p",{className:"error",children:o}),!i&&!o&&n.jsx(Ue,{leaderboard:l,currentUser:u})]})})};export{$e as default};
//# sourceMappingURL=LeaderBoardPage-CVuAWc8i.js.map
