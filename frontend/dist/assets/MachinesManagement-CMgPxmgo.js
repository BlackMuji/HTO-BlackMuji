import{r,j as t}from"./index-CivGSquN.js";import{S as x,E as A}from"./AdminSidebar-DtRlde2w.js";import{D as p,A as j,C as M}from"./ConfirmationModal-KRM3RTXK.js";import{k as y,l as g,m as E,n as O}from"./axiosMachine-BVJLXleH.js";const _=()=>{const[d,o]=r.useState([]),[l,h]=r.useState(null),[c,n]=r.useState({isOpen:!1,machineId:void 0,action:void 0});r.useEffect(()=>{(async()=>{try{const a=await y();o(a.machines)}catch(a){console.error("Error fetching machines:",a),h("Failed to load machines.")}})()},[]);const v=(e,a)=>{n({isOpen:!0,machineId:e,action:a?"deactivate":"activate"})},f=e=>{n({isOpen:!0,machineId:e,action:"delete"})},u=async()=>{const{machineId:e,action:a}=c;if(!(!e||!a))try{a==="activate"?(await g(e),o(s=>s.map(i=>i._id===e?{...i,isActive:!0}:i))):a==="deactivate"?(await E(e),o(s=>s.map(i=>i._id===e?{...i,isActive:!1}:i))):a==="delete"&&(await O(e),o(s=>s.filter(i=>i._id!==e))),n({isOpen:!1,machineId:void 0,action:void 0})}catch(s){console.error(`Error performing ${a} on machine:`,s),h(`Failed to ${a} machine.`),n({isOpen:!1,machineId:void 0,action:void 0})}},m=[{header:"Name",accessor:"name"},{header:"Active",accessor:"isActive"}];return t.jsxs("div",{className:"admin-dashboard",children:[t.jsx(x,{}),t.jsxs("div",{className:"admin-content",children:[t.jsx("h1",{children:"Machines Management"}),l&&t.jsx(A,{message:l}),t.jsx(p,{columns:m,data:d.map(e=>({...e,isActive:e.isActive?"Yes":"No"})),actions:void 0}),t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[m.map(e=>t.jsx("th",{children:e.header},e.accessor)),t.jsx("th",{children:"Actions"})]})}),t.jsx("tbody",{children:d.map(e=>t.jsxs("tr",{children:[t.jsx("td",{children:e.name}),t.jsx("td",{children:e.isActive?"Yes":"No"}),t.jsx("td",{children:t.jsx(j,{onActivate:e.isActive?void 0:()=>v(e._id,e.isActive),onDeactivate:e.isActive?()=>v(e._id,e.isActive):void 0,onDelete:()=>f(e._id)})})]},e._id))})]}),t.jsx(M,{isOpen:c.isOpen,title:c.action==="activate"?"Confirm Activate Machine":c.action==="deactivate"?"Confirm Deactivate Machine":"Confirm Delete Machine",message:c.action==="activate"?"Are you sure you want to activate this machine?":c.action==="deactivate"?"Are you sure you want to deactivate this machine?":"Are you sure you want to delete this machine? This action cannot be undone.",onConfirm:u,onCancel:()=>n({isOpen:!1,machineId:void 0,action:void 0})})]})]})};export{_ as default};
//# sourceMappingURL=MachinesManagement-CMgPxmgo.js.map
