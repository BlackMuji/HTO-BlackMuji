import{j as e,r,F as j,f as E,u as L,M as N}from"./index-CivGSquN.js";import{f as y}from"./dateUtils-B3xnuPlA.js";import{a as P,b as S,c as A,d as T}from"./axiosContest-a7qLFL0E.js";import{C as F,I as $,a as B}from"./CurrentUserInfo-BfC7ddW6.js";const R="_contest_detail_container_xtpg1_1",z="_box_upper_content_xtpg1_8",U="_contest_textbox_xtpg1_15",q="_contest_name_xtpg1_18",G="_contest_machines_xtpg1_26",V="_contest_description_xtpg1_29",X="_contest_reward_box_xtpg1_35",H="_text_xtpg1_47",J="_reward_text_xtpg1_48",K="_time_text_xtpg1_56",_={contest_detail_container:R,box_upper_content:z,contest_textbox:U,contest_name:q,contest_machines:G,contest_description:V,contest_reward_box:X,text:H,reward_text:J,time_text:K},O=({contestDetail:i})=>{const{name:b,contestExp:c,machines:m,startTime:l,endTime:o}=i;return e.jsx("div",{className:_.contest_detail_container,children:e.jsxs("div",{className:_.contest_detail_content,children:[e.jsxs("div",{className:_.box_upper_content,children:[e.jsxs("div",{className:_.contest_textbox,children:[e.jsx("div",{className:_.contest_name,children:b||"N/A"}),m.length>0?e.jsx("ul",{className:_.contest_machines,children:m.map(u=>e.jsx("li",{children:u.name},u._id))}):e.jsx("p",{children:"N/A"})]}),e.jsxs("div",{className:_.contest_reward_box,children:[e.jsx("p",{className:_.text,children:"Reward:"}),e.jsxs("p",{className:_.reward_text,children:["EXP ",c||0]})]})]}),e.jsxs("div",{className:_.time_text,children:[l?y(l):"N/A"," ~ ",o?y(o):"N/A"]})]})})},Q="_board_acs73_2",W="_leaderboard_container_acs73_9",Y="_current_user_acs73_20",Z="_leaderboard_table_acs73_24",ee="_leaderboard_data_acs73_35",te="_leaderboard_rank_acs73_40",se="_leaderboard_level_acs73_41",ae="_leaderboard_exp_acs73_42",ne="_leaderboard_userinfo_acs73_53",oe="_leaderboard_avatar_acs73_59",re="_leaderboard_username_acs73_64",ce="_pagination_acs73_72",_e="_page_button_acs73_77",ie="_number_button_acs73_88",le="_goldMedal_acs73_95",de="_silverMedal_acs73_96",ue="_bronzeMedal_acs73_97",me="_high_rank_acs73_115",s={board:Q,leaderboard_container:W,current_user:Y,leaderboard_table:Z,leaderboard_data:ee,leaderboard_rank:te,leaderboard_level:se,leaderboard_exp:ae,leaderboard_userinfo:ne,leaderboard_avatar:oe,leaderboard_username:re,pagination:ce,page_button:_e,number_button:ie,goldMedal:le,silverMedal:de,bronzeMedal:ue,high_rank:me},be="/assets/profile_default-BmmIzqaq.png",C=5,pe=({leaderboard:i,currentUser:b})=>{const[c,m]=r.useState(1),l=Math.ceil(i.length/C),o=(c-1)*C,u=i.slice(o,o+C),p=n=>{n>0&&n<=l&&m(n)};return e.jsx("div",{className:s.board,children:e.jsxs("div",{className:s.leaderboard_container,children:[e.jsx("div",{className:s.current_user,children:e.jsx(F,{currentUser:b})}),e.jsx("div",{className:s.leaderboard_table,children:u.length>0?u.map((n,a)=>e.jsxs("div",{className:s.leaderboard_data,children:[e.jsx("div",{className:s.leaderboard_rank,children:a===0?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:s.goldMedal,size:32}),e.jsx("span",{className:s.high_rank,children:o+a+1})]}):a===1?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:s.silverMedal,size:32}),e.jsx("span",{className:s.high_rank,children:o+a+1})]}):a===2?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:s.bronzeMedal,size:32}),e.jsx("span",{className:s.high_rank,children:o+a+1})]}):`${o+a+1}`}),e.jsxs("div",{className:s.leaderboard_level,children:["LV. ",n.level]}),e.jsxs("div",{className:s.leaderboard_userinfo,children:[e.jsx("img",{className:s.leaderboard_avatar,alt:"User Avatar",src:n.avatar||be}),e.jsx("div",{className:s.leaderboard_username,children:n.username})]}),e.jsx("div",{className:s.leaderboard_exp,children:n.exp})]},`${n._id}-${a}`)):e.jsx("div",{children:e.jsx("div",{className:"no-data",children:"No contestants found"})},"no-contestants-found")}),e.jsxs("div",{className:s.pagination,children:[e.jsx("button",{className:s.page_button,onClick:()=>p(c-1),disabled:c===1,children:e.jsx($,{})}),Array.from({length:l},(n,a)=>e.jsx("button",{className:`${s.number_button} ${c===a+1?s.active:""}`,onClick:()=>p(a+1),children:a+1},a)),e.jsx("button",{className:s.page_button,onClick:()=>p(c+1),disabled:c===l,children:e.jsx(B,{})})]})]})})},he="_skip_12u1e_1",ge="_blind_12u1e_192",xe="_ir_12u1e_204",fe="_background_12u1e_253",ve="_main_container_12u1e_262",je="_sidebar_container_12u1e_271",Ne="_collpased_12u1e_277",Ce="_upper_container_12u1e_280",Me="_upper_bar_12u1e_285",ke="_profile_container_12u1e_291",Ie="_props_container_12u1e_294",ye="_collapsed_12u1e_309",De="_sidebarMenu_12u1e_313",we="_headerParent_12u1e_326",Ee="_header_12u1e_326",Le="_logoimage_12u1e_344",Pe="_logoContainerIcon_12u1e_348",Se="_sidebarMenuButton_12u1e_354",Ae="_collapse_button_12u1e_364",Te="_topMenu_12u1e_372",Fe="_verticalMenuList_12u1e_381",$e="_verticalMenuItem_12u1e_387",Be="_menuIcon_12u1e_399",Re="_label_12u1e_404",ze="_selected_12u1e_430",Ue="_userinfoDark_12u1e_445",qe="_userinfoDark_container_12u1e_459",Ge="_userinfo_12u1e_445",Ve="_rectangleParent_12u1e_480",Xe="_userIcon_12u1e_487",He="_userinfoContainer_12u1e_494",Je="_userName_12u1e_501",Ke="_userEmail_12u1e_505",Oe="_userinfoButtonIcon_12u1e_510",Qe="_userinfoDarkChild_12u1e_519",We="_userMenu_12u1e_525",Ye="_expanded_12u1e_540",Ze="_settings_12u1e_544",et="_settingsInner_12u1e_553",tt="_settingsChild_12u1e_554",st="_icon_12u1e_571",at="_dashboard_12u1e_577",nt="_darkMode_12u1e_589",ot="_switchIcon_12u1e_597",rt="_logout_12u1e_606",ct="_logout_icon_12u1e_621",_t="_contest_detail_container_12u1e_625",it="_contest_detail_page_12u1e_636",lt="_detail_12u1e_641",dt="_participate_button_12u1e_645",ut="_contestLeaderboardTable_12u1e_659",v={skip:he,blind:ge,ir:xe,background:fe,main_container:ve,sidebar_container:je,collpased:Ne,upper_container:Ce,upper_bar:Me,profile_container:ke,props_container:Ie,collapsed:ye,sidebarMenu:De,headerParent:we,header:Ee,logoimage:Le,logoContainerIcon:Pe,sidebarMenuButton:Se,collapse_button:Ae,topMenu:Te,verticalMenuList:Fe,verticalMenuItem:$e,menuIcon:Be,label:Re,selected:ze,userinfoDark:Ue,userinfoDark_container:qe,userinfo:Ge,rectangleParent:Ve,userIcon:Xe,userinfoContainer:He,userName:Je,userEmail:Ke,userinfoButtonIcon:Oe,userinfoDarkChild:Qe,userMenu:We,expanded:Ye,settings:Ze,settingsInner:et,settingsChild:tt,icon:st,dashboard:at,darkMode:nt,switchIcon:ot,logout:rt,logout_icon:ct,contest_detail_container:_t,contest_detail_page:it,detail:lt,participate_button:dt,contestLeaderboardTable:ut},gt=()=>{const[i,b]=r.useState(null),[c,m]=r.useState([]),[l,o]=r.useState({isActive:!1,isStarted:!1,isEnded:!1}),[u,p]=r.useState({_id:null,myRank:null,myLevel:null,myExp:null,myUsername:null,myAvatar:null}),[n,a]=r.useState(!0),[M,h]=r.useState(null),{contestId:d}=E(),k=L();r.useEffect(()=>{(async()=>{if(!d){h("Contest ID is missing."),a(!1);return}try{const x=(await P(d)).contest,f={...x,startTime:new Date(x.startTime),endTime:new Date(x.endTime)};b(f)}catch(t){console.error("Error fetching contest details:",t.message||t),h("Failed to fetch contest details.")}finally{a(!1)}})()},[d]),r.useEffect(()=>{(async()=>{a(!0);try{const t=await S(d||"");m(t.users)}catch(t){console.error("Error fetching leaderboard:",t.message||t),h("Failed to fetch leaderboard.")}finally{a(!1)}})()},[d]),r.useEffect(()=>{(async()=>{a(!0);try{const t=await A(d||"");p({_id:t.user._id,myRank:t.myRank,myLevel:t.user.level,myExp:t.expEarned,myUsername:t.user.username,myAvatar:t.user.avatar})}catch(t){console.error("Error fetching current user:",t.message||t),h("Failed to fetch current user.")}finally{a(!1)}})()},[d]),r.useEffect(()=>{(async()=>{try{const t=await T(d||"");o(t)}catch(t){console.error("Error fetching contest status:",t.message||t),h("Failed to fetch contest status.")}})()},[d]);const D=()=>{if(!i)return;const{isActive:g,startTime:t,endTime:x,_id:f}=i,I=Date.now(),w=g&&new Date(t).getTime()<=I&&new Date(x).getTime()>=I;k(w?`/contest/${f}/pre`:`/contest/${f}/pending`)};return n?e.jsx(N,{title:"Contest Detail",description:"Loading contest details.",children:e.jsx("div",{className:"contest-detail-page loading",children:e.jsx("p",{children:"Loading..."})})}):M||!i?e.jsx(N,{title:"Contest Detail",description:"Failed to load contest details.",children:e.jsx("div",{className:"contest-detail-page error",children:e.jsx("p",{className:"error-message",children:M||"Contest not found."})})}):e.jsx(N,{title:"Contest Detail",description:"Contest Detail 화면입니다.",children:e.jsxs("div",{className:v.contest_detail_container,children:[e.jsxs("div",{className:v.contest_detail_page,children:[e.jsx("div",{className:v.detail,children:e.jsx(O,{contestDetail:i})}),e.jsx("button",{onClick:D,className:v.participate_button,children:"Play"})]}),l.isActive&&l.isStarted&&e.jsx(pe,{leaderboard:c,currentUser:u})]})})};export{gt as default};
//# sourceMappingURL=ContestDetailPage-iL9YMCCV.js.map
