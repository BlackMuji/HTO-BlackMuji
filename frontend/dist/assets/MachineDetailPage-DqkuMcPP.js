import{g as p,j as e,A as u,a as v,r,f,u as w,M as m}from"./index-CivGSquN.js";import{B as x,R as g}from"./Rating-DCjIB3l-.js";import{c as N,d as y,s as M}from"./axiosMachine-BVJLXleH.js";const D=({machineDetail:a})=>{const{_id:c,name:i,category:h,description:l,exp:n,rating:t}=a,s=p(i),d=v[s];return e.jsx("div",{className:"machine-detail-container",children:e.jsxs("div",{className:"machine-detail",children:[e.jsx(u,{sx:{backgroundColor:d,width:150,height:150,margin:"0 auto 20px auto",fontSize:"3rem"},children:i.charAt(0).toUpperCase()}),e.jsx("h3",{children:"Machine Details"}),e.jsxs("p",{className:"machine-name",children:[e.jsx("strong",{children:"Name:"})," ",i]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",l||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Experience Points (EXP):"})," ",n||0]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Category:"})," ",h||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Rating:"}),e.jsxs(x,{sx:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"8px",marginBottom:"8px"},children:[e.jsx(g,{name:`read-only-rating-${c}`,value:Number(t),precision:.5,readOnly:!0}),e.jsx("span",{style:{marginLeft:"8px",color:"#555"},children:t.toFixed(1)})]})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Rewards:"})," ",n||0," EXP"]})]})})},R=({machineId:a})=>{const[c,i]=r.useState([]),[h,l]=r.useState(!0),[n,t]=r.useState(null);return r.useEffect(()=>{(async()=>{if(!a){t("Machine ID is missing."),l(!1);return}try{const d=await N(a);i(d.reviews),l(!1)}catch(d){t(`Error fetching reviews: ${d.msg}`),l(!1)}})()},[a]),h?e.jsx("div",{children:"Loading..."}):n?e.jsx("div",{children:n}):e.jsxs("div",{className:"machine-review-list",children:[e.jsx("h3",{children:"Reviews"}),e.jsx("table",{className:"machine-review-table",children:c.length===0?e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"no-data",children:"No reviews available."})})}):e.jsxs(e.Fragment,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"machine-review-username",children:"Username"}),e.jsx("th",{className:"machine-review-rating",children:"Rating"}),e.jsx("th",{className:"machine-review-comment",children:"Comment"})]})}),e.jsx("tbody",{children:c.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.reviewerName}),e.jsx("td",{children:e.jsx(x,{sx:{"& > legend":{mt:2}},children:e.jsx(g,{name:`read-only-rating-${s._id}`,value:Number(s.rating),precision:.5,readOnly:!0})})}),e.jsx("td",{children:s.content})]},s._id))})]})})]})},A=()=>{const{machineId:a}=f(),c=w(),[i,h]=r.useState(null),[l,n]=r.useState(!0),[t,s]=r.useState(null);r.useEffect(()=>{(async()=>{if(!a){s("Machine ID is missing."),n(!1);return}try{const o=await y(a);h(o.machine)}catch(o){console.error("Error fetching machine details:",o.message||o),s("Failed to fetch machine details.")}finally{n(!1)}})()},[a]);const d=async()=>{i&&i._id?(await M(i._id),c(`/machine/${i._id}/play`)):alert("Invalid machine details.")},j=()=>{a?c(`/machine/${a}/review/new`):alert("Invalid machine ID.")};return l?e.jsx(m,{title:"Machine Detail",description:"Loading machine details.",children:e.jsx("div",{className:"machine-detail-page loading",children:e.jsx("p",{children:"Loading..."})})}):t||!i?e.jsx(m,{title:"Machine Detail",description:"Failed to load machine details.",children:e.jsx("div",{className:"machine-detail-page error",children:e.jsx("p",{className:"error-message",children:t||"Machine not found."})})}):e.jsx(m,{title:"Machine Detail",description:"Machine Detail 화면입니다.",children:e.jsxs("div",{className:"machine-detail-page-container",children:[e.jsxs("div",{className:"machine-detail-page",children:[e.jsx(D,{machineDetail:i}),e.jsx("button",{onClick:d,className:"play-button",children:"Play"})]}),e.jsx("div",{className:"machine-detail-page-review",children:e.jsx(R,{machineId:a||""})}),e.jsx("div",{className:"machine-detail-page-new-review",children:e.jsx("button",{onClick:j,className:"machine-detail-page-new-review-button",children:"Add New Review"})})]})})};export{A as default};
//# sourceMappingURL=MachineDetailPage-DqkuMcPP.js.map
