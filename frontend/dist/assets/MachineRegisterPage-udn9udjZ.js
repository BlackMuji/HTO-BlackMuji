import{I as y,j as e,r as c,u as C,M as f}from"./index-CivGSquN.js";import{e as b}from"./axiosMachine-BVJLXleH.js";const N=y(e.jsx("path",{d:"m14 7-5 5 5 5z"}),"ArrowLeftOutlined"),I=()=>{const r=c.useRef(null),[t,o]=c.useState({name:"",category:"",amiId:"",flag:"",description:"",exp:50,hints:[""],hintCosts:[1]}),[d,h]=c.useState(null),m=C(),l=n=>{const{name:s,value:a}=n.target;o(i=>({...i,[s]:s==="exp"||s==="contestExp"?Number(a):a}))},u=(n,s)=>{const a=[...t.hints];a[n]=s,o(i=>({...i,hints:a}))},p=(n,s)=>{const a=[...t.hintCosts];a[n]=s,o(i=>({...i,hintCosts:a}))},x=()=>{o(n=>({...n,hints:[...n.hints,""],hintCosts:[...n.hintCosts,1]}))},j=n=>{const s=[...t.hints],a=[...t.hintCosts];s.splice(n,1),a.splice(n,1),o(i=>({...i,hints:s,hintCosts:a}))},g=async n=>{if(n.preventDefault(),h(null),!t.name||!t.category||!t.amiId||!t.flag){h("Please fill in all required fields.");return}try{await b(t),m("/machines")}catch(s){h(s.msg||"Failed to create machine.")}},v=()=>{r.current&&(r.current.style.height="auto",r.current.style.width="50%",r.current.style.height=`${r.current.scrollHeight}px`)};return c.useEffect(()=>{v()},[t.description]),e.jsxs("form",{onSubmit:g,className:"add-machine-form",children:[e.jsx("div",{className:"back-button",children:e.jsx("button",{className:"IconButton",type:"button",onClick:()=>m(-1),children:e.jsx(N,{style:{color:"white",fontSize:"34px"}})})}),e.jsx("h2",{children:"Add New Machine"}),d&&e.jsx("p",{className:"error-message",children:d}),e.jsxs("div",{className:"create-container",children:[e.jsxs("div",{className:"name-container",children:[e.jsxs("label",{htmlFor:"name",children:["Machine name ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:l,required:!0})]}),e.jsxs("div",{className:"category-container",children:[e.jsxs("label",{htmlFor:"category",children:["Category ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("select",{id:"category",name:"category",value:t.category,onChange:n=>l(n),required:!0,children:[e.jsx("option",{value:"",children:"--Select Category--"}),e.jsx("option",{value:"Web",children:"Web"}),e.jsx("option",{value:"Network",children:"Network"}),e.jsx("option",{value:"Database",children:"Database"}),e.jsx("option",{value:"Crypto",children:"Crypto"}),e.jsx("option",{value:"Cloud",children:"Cloud"}),e.jsx("option",{value:"AI",children:"AI"}),e.jsx("option",{value:"OS",children:"OS"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"amiId-container",children:[e.jsxs("label",{htmlFor:"amiId",children:["AMI ID ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{type:"text",id:"amiId",name:"amiId",value:t.amiId,onChange:l,placeholder:"AMI-XXXXXX",required:!0})]}),e.jsxs("div",{className:"flag-container",children:[e.jsxs("label",{htmlFor:"flag",children:["Flag ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{type:"text",id:"flag",name:"flag",value:t.flag,onChange:l,required:!0,placeholder:"Flag of the machine here"})]}),e.jsxs("div",{className:"Description-container",children:[e.jsxs("label",{htmlFor:"description",children:["Machine Description ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("textarea",{ref:r,id:"description",name:"description",value:t.description,placeholder:"Description of the machine here",onChange:l})]}),e.jsxs("div",{className:"exp-container",children:[e.jsxs("label",{htmlFor:"exp",children:["EXP ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{type:"number",id:"exp",name:"exp",value:t.exp,onChange:l,min:0})]}),e.jsxs("div",{className:"hint-container",children:[e.jsxs("label",{children:["Hints ",e.jsx("span",{style:{color:"red"},children:"*"})]}),t.hints.map((n,s)=>e.jsxs("div",{className:"key-container",children:[e.jsx("input",{className:"",type:"text",value:n,onChange:a=>u(s,a.target.value),placeholder:"Hint"}),e.jsx("input",{type:"number",value:t.hintCosts[s],onChange:a=>p(s,Number(a.target.value)),placeholder:"Cost",min:0}),t.hints.length>1&&e.jsx("button",{className:"remove-hint",type:"button",onClick:()=>j(s),children:"Remove"}),e.jsx("button",{className:"add-hint",type:"button",onClick:x,children:"Add Hint"})]},s))]}),e.jsx("div",{className:"add-machine-form-button",children:e.jsx("button",{type:"submit",children:"Create Machine"})})]})]})},F=()=>e.jsx(f,{children:e.jsx(I,{})});export{F as default};
//# sourceMappingURL=MachineRegisterPage-udn9udjZ.js.map
